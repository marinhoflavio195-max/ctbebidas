<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>SR Delivery</title>

<style>

body{
margin:0;
font-family:Arial, sans-serif;
background:#f5f5f5;
padding-top:200px;
}

/* TOPO */
header{
background:url("img/logoGPT.png") center/100% 100% no-repeat;
height:190px;
position:fixed;
top:0;
left:0;
width:100%;
z-index:1000;
display:flex;
justify-content:flex-end;
align-items:center;
padding:10px;
box-sizing:border-box;
}

.cart-icon{
font-size:26px;
color:white;
cursor:pointer;
position:relative;
}

.cart-count{
background:#fff;
color:#c40000;
border-radius:50%;
padding:2px 6px;
font-size:12px;
position:absolute;
top:-6px;
right:-8px;
}

/* CATEGORIAS */
.categories{
display:flex;
justify-content:center;
gap:8px;
background:#fff;
padding:8px;
position:sticky;
top:190px;
z-index:900;
}

.categories button{
border:none;
background:#eee;
padding:6px 12px;
border-radius:20px;
cursor:pointer;
font-size:13px;
}

.categories .active{
background:#c40000;
color:#fff;
}

/* PRODUTOS */
.products{
display:grid;
grid-template-columns:repeat(auto-fill,minmax(150px,1fr));
gap:10px;
padding:10px;
}

.product{
background:#fff;
border-radius:8px;
padding:8px;
text-align:center;
box-shadow:0 0 5px rgba(0,0,0,.1);
}

.product img{
width:100%;
height:110px;
object-fit:contain;
}

.qty{
display:flex;
justify-content:center;
gap:5px;
}

.qty button{
width:24px;
}

.qty input{
width:40px;
text-align:center;
}

/* CARRINHO */
#cart{
position:fixed;
top:0;
right:-100%;
width:90%;
max-width:350px;
height:100%;
background:#fff;
z-index:2000;
transition:.3s;
overflow:auto;
}

#cart.active{
right:0;
}

.cart-header{
background:#c40000;
color:#fff;
padding:10px;
display:flex;
justify-content:space-between;
}

.cart-item{
padding:8px;
border-bottom:1px solid #ddd;
font-size:13px;
}

.cart-qty{
display:flex;
align-items:center;
gap:5px;
margin-top:5px;
}

.cart-qty button{
width:22px;
height:22px;
border:none;
background:#c40000;
color:#fff;
border-radius:3px;
cursor:pointer;
}

/* FORM */
.form input, .form select{
width:100%;
padding:7px;
margin:5px 0;
}

.checkout{
background:#c40000;
color:#fff;
border:none;
width:100%;
padding:12px;
font-size:16px;
margin-top:10px;
border-radius:5px;
}

</style>
</head>

<body>

<header>
<div class="cart-icon" onclick="toggleCart()">
üõí <span id="count" class="cart-count">0</span>
</div>
</header>

<!-- CATEGORIAS -->
<div class="categories">
<button class="active" onclick="filter('cerveja',this)">Cervejas</button>
<button onclick="filter('refri',this)">Refrigerantes</button>
<button onclick="filter('agua',this)">√Ågua</button>
<button onclick="filter('destilado',this)">Destilados</button>
</div>

<!-- PRODUTOS -->
<div id="products" class="products"></div>

<!-- CARRINHO -->
<div id="cart">

<div class="cart-header">
<h3>Carrinho</h3>
<button onclick="toggleCart()">‚úñ</button>
</div>

<div id="items"></div>

<div class="total" id="total"></div>

<div class="form">

<input id="nome" placeholder="Nome">
<input id="fone" placeholder="Telefone">
<input id="endereco" placeholder="Endere√ßo">
<input id="ref" placeholder="Refer√™ncia">

<select id="tipo">
<option value="entrega">Entrega</option>
<option value="retirada">Retirada</option>
</select>

<select id="pagamento">
<option value="pix">Pix</option>
<option value="dinheiro">Dinheiro</option>
<option value="cartao">Cart√£o</option>
</select>

<button class="checkout" onclick="finalizar()">Finalizar</button>

</div>
</div>

<script>

/* PRODUTOS */
let produtos = [

{ id:1,nome:"BRAHMA 350ML",preco:3.89,cat:"cerveja",img:"img/1.png"},
{ id:2,nome:"AMSTEL 600ML",preco:7.99,cat:"cerveja",img:"img/2.png"},

{ id:200,nome:"Coca 2L",preco:9.99,cat:"refri",img:"img/3.png"},
{ id:201,nome:"Guaran√° 2L",preco:8.99,cat:"refri",img:"img/4.png"},

{ id:300,nome:"√Ågua 500ml",preco:2.5,cat:"agua",img:"img/5.png"}

];

let cart=[];
let categoria="cerveja";

/* RENDER */
function render(){

let div=document.getElementById("products");
div.innerHTML="";

produtos.filter(p=>p.cat==categoria).forEach(p=>{

div.innerHTML+=`

<div class="product">

<img src="${p.img}">

<h4>${p.nome}</h4>

<p>R$ ${p.preco.toFixed(2)}</p>

<div class="qty">
<button onclick="qtd(${p.id},-1)">-</button>
<input id="q${p.id}" value="1">
<button onclick="qtd(${p.id},1)">+</button>
</div>

<button onclick="add(${p.id})">Adicionar</button>

</div>

`;

});

}

/* QTD PRODUTO */
function qtd(id,d){

let i=document.getElementById("q"+id);
let v=parseInt(i.value)+d;

if(v<1) v=1;

i.value=v;

}

/* ADD CARRINHO */
function add(id){

let p=produtos.find(x=>x.id==id);
let q=parseInt(document.getElementById("q"+id).value);

let e=cart.find(x=>x.id==id);

if(e){
e.qtd = q; // SUBSTITUI
}else{
cart.push({...p,qtd:q});
}

update();

}

/* ALTERAR NO CARRINHO */
function alterarQtd(id,valor){

let item = cart.find(i=>i.id==id);

if(!item) return;

item.qtd += valor;

if(item.qtd<=0){
cart = cart.filter(i=>i.id!=id);
}

update();

}

/* UPDATE */
function update(){

let div=document.getElementById("items");
div.innerHTML="";

let total=0;
let c=0;

cart.forEach(i=>{

total+=i.preco*i.qtd;
c+=i.qtd;

div.innerHTML+=`

<div class="cart-item">

<b>${i.nome}</b><br>
R$ ${(i.preco*i.qtd).toFixed(2)}

<div class="cart-qty">
<button onclick="alterarQtd(${i.id},-1)">-</button>
${i.qtd}
<button onclick="alterarQtd(${i.id},1)">+</button>
</div>

</div>

`;

});

document.getElementById("total").innerText="Total: R$ "+total.toFixed(2);
document.getElementById("count").innerText=c;

}

/* CART */
function toggleCart(){
document.getElementById("cart").classList.toggle("active");
}

/* FILTRO */
function filter(cat,btn){

categoria=cat;

document.querySelectorAll(".categories button")
.forEach(b=>b.classList.remove("active"));

btn.classList.add("active");

render();

}

/* FINALIZAR */
function finalizar(){

if(cart.length==0){
alert("Carrinho vazio!");
return;
}

let nome = nome.value.trim();
let fone = fone.value.trim();
let endereco = endereco.value.trim();
let ref = ref.value.trim();
let tipo = tipo.value;
let pagamento = pagamento.value;

if(nome==""||fone==""){
alert("Nome e telefone obrigat√≥rios!");
return;
}

if(tipo=="entrega" && (endereco==""||ref=="")){
alert("Preencha endere√ßo!");
return;
}

let total = cart.reduce((a,b)=>a+b.preco*b.qtd,0);

/* WHATSAPP */
let msg="üõí *PEDIDO SR*%0A%0A";

msg+="üë§ "+nome+"%0A";
msg+="üìû "+fone+"%0A%0A";

msg+="üì¶ Produtos:%0A";

cart.forEach(i=>{
msg+="‚Ä¢ "+i.nome+" ("+i.qtd+"x)%0A";
});

msg+="%0Aüí∞ Total: R$ "+total.toFixed(2);

let tel="5599988592997";

window.open("https://wa.me/"+tel+"?text="+msg);

cart=[];
update();
toggleCart();

}

/* START */
window.onload=render;

</script>

</body>
</html>
