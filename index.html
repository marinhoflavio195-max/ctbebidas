<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Rái Delivery</title>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
<style>
body { font-family: Arial, sans-serif; margin:0; background:#fff; }
header { background:red; color:#fff; padding:10px; display:flex; align-items:center; justify-content:space-between; }
header img { height:50px; object-fit:contain; }
header h1 { margin:0; font-size:1.5em; }
.cart { position:relative; cursor:pointer; }
.cart-count { position:absolute; top:-5px; right:-10px; background:#fff; color:red; font-weight:bold; border-radius:50%; padding:2px 6px; font-size:0.8em; }
.product-grid { display:grid; grid-template-columns:repeat(auto-fill, minmax(140px, 1fr)); gap:10px; padding:10px; }
.product { border:1px solid #ccc; border-radius:5px; padding:10px; text-align:center; background:#fff; }
.product img { width:100%; height:120px; object-fit:contain; margin-bottom:5px; }
.product button { margin-top:5px; padding:5px 10px; background:red; color:#fff; border:none; cursor:pointer; border-radius:3px; }
.cart-modal { display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.5); justify-content:center; align-items:center; }
.cart-content { background:#fff; width:90%; max-width:500px; padding:20px; border-radius:5px; max-height:90%; overflow-y:auto; position:relative; }
.close-cart { position:absolute; top:10px; right:10px; cursor:pointer; color:red; font-size:1.2em; }
.cart-item { display:flex; justify-content:space-between; align-items:center; border-bottom:1px solid #ccc; padding:5px 0; }
.cart-item button { padding:2px 6px; margin-left:5px; }
.payment { margin-top:10px; }
.payment input, .payment select { width:100%; padding:5px; margin:5px 0; }
.checkout-btn { background:red; color:#fff; padding:10px; width:100%; border:none; cursor:pointer; margin-top:10px; border-radius:5px; }
</style>
</head>
<body>

<header>
    <img src="img/logo.png" alt="Rái Delivery">
    <h1>Rái Delivery</h1>
    <div class="cart" onclick="toggleCart()">
        <i class="fas fa-shopping-cart fa-2x"></i>
        <span class="cart-count" id="cart-count">0</span>
    </div>
</header>

<main id="products" class="product-grid"></main>

<div class="cart-modal" id="cart-modal">
    <div class="cart-content">
        <span class="close-cart" onclick="toggleCart()">&times;</span>
        <h2>Carrinho</h2>
        <div id="cart-items"></div>
        <p id="cart-total">Total: R$ 0,00</p>
        <div class="payment">
            <label>Forma de Pagamento:</label>
            <select id="payment-method">
                <option value="pix">Pix</option>
                <option value="dinheiro">Dinheiro</option>
                <option value="cartao">Cartão de Crédito/Débito</option>
            </select>
            <label>Tipo de Entrega:</label>
            <select id="delivery-type">
                <option value="entrega">Entrega</option>
                <option value="retirada">Retirada no Local</option>
            </select>
            <div id="pix-section" style="display:none;">
                <p>Pix: 99981050024</p>
                <p>Chave: Telefone</p>
                <button onclick="generatePixQRCode()">Gerar QR Code</button>
                <div id="pix-qr"></div>
                <label>Enviar Comprovante:</label>
                <input type="file" id="pix-proof" accept="image/*">
            </div>
        </div>
        <button class="checkout-btn" onclick="checkout()">Finalizar Pedido</button>
    </div>
</div>

<script>
// 80 cervejas placeholder
const produtos = [
{id:1,nome:"CERVEJA BRAHMA CHOPP LT 350ML",preco:3.89,imagem:"img/cerveja1.png"},
{id:2,nome:"CERVEJA BOHEMIA LONG NECK 355ML",preco:4.49,imagem:"img/cerveja2.png"},
{id:3,nome:"CERVEJA AMSTEL LAGER 600ML",preco:7.99,imagem:"img/cerveja3.png"},
{id:4,nome:"CERVEJA ANTARCTICA LT 350ML",preco:4.35,imagem:"img/cerveja4.png"},
{id:5,nome:"CERVEJA KAISER LATÃO 473ML",preco:3.95,imagem:"img/cerveja5.png"},
{id:6,nome:"CERVEJA SKOL LT 269ML",preco:3.25,imagem:"img/cerveja6.png"},
{id:7,nome:"CERVEJA DEVASSA LOURA LN 355ML",preco:3.79,imagem:"img/cerveja7.png"},
{id:8,nome:"CERVEJA BUDWEISER 350ML LT",preco:4.75,imagem:"img/cerveja8.png"},
{id:9,nome:"CERVEJA SKOL ONE WAY 1L",preco:4.99,imagem:"img/cerveja9.png"},
{id:10,nome:"CERVEJA PILSEN ITAIPAVA 350ML",preco:2.70,imagem:"img/cerveja10.png"},
// ... complete até 80 cervejas com img/cerveja11.png a img/cerveja80.png
{id:80,nome:"CERVEJA ANTARCTICA PREMIUM 350ML",preco:4.55,imagem:"img/cerveja80.png"}
];

// Renderização produtos
const productsContainer = document.getElementById('products');
produtos.forEach(p=>{
    const div = document.createElement('div');
    div.className = 'product';
    div.innerHTML = `
        <img src="${p.imagem}" alt="${p.nome}">
        <h4>${p.nome}</h4>
        <p>R$ ${p.preco.toFixed(2)}</p>
        <input type="number" id="qty-${p.id}" value="1" min="1" style="width:40px">
        <button onclick="addToCart(${p.id})">Adicionar</button>
    `;
    productsContainer.appendChild(div);
});

let cart = [];

function addToCart(id){
    const produto = produtos.find(p=>p.id===id);
    const qty = parseInt(document.getElementById(`qty-${id}`).value);
    const existing = cart.find(c=>c.id===id);
    if(existing){
        existing.quantidade += qty;
    }else{
        cart.push({...produto, quantidade:qty});
    }
    updateCart();
}

function removeFromCart(id){
    cart = cart.filter(c=>c.id!==id);
    updateCart();
}

function changeQuantity(id,delta){
    const item = cart.find(c=>c.id===id);
    if(item){
        item.quantidade += delta;
        if(item.quantidade < 1) item.quantidade = 1;
    }
    updateCart();
}

function updateCart(){
    const cartItems = document.getElementById('cart-items');
    cartItems.innerHTML = '';
    let total = 0;
    cart.forEach(c=>{
        total += c.preco * c.quantidade;
        const div = document.createElement('div');
        div.className = 'cart-item';
        div.innerHTML = `
            <span>${c.nome} R$ ${c.preco.toFixed(2)} x ${c.quantidade}</span>
            <div>
                <button onclick="changeQuantity(${c.id},-1)">-</button>
                <button onclick="changeQuantity(${c.id},1)">+</button>
                <button onclick="removeFromCart(${c.id})">X</button>
            </div>
        `;
        cartItems.appendChild(div);
    });
    document.getElementById('cart-total').innerText = `Total: R$ ${total.toFixed(2)}`;
    document.getElementById('cart-count').innerText = cart.reduce((acc,c)=>acc+c.quantidade,0);
}

function toggleCart(){
    const modal = document.getElementById('cart-modal');
    modal.style.display = modal.style.display==='flex'?'none':'flex';
}

document.getElementById('payment-method').addEventListener('change',e=>{
    document.getElementById('pix-section').style.display = e.target.value==='pix'?'block':'none';
});

function generatePixQRCode(){
    const total = cart.reduce((acc,c)=>acc+c.preco*c.quantidade,0);
    const qrDiv = document.getElementById('pix-qr');
    qrDiv.innerHTML = `<img src="https://api.qrserver.com/v1/create-qr-code/?data=PIX 99981050024 valor R$${total.toFixed(2)}&size=150x150" alt="Pix QR">`;
}

function checkout(){
    const total = cart.reduce((acc,c)=>acc+c.preco*c.quantidade,0);
    if(total<100){
        alert("Entrega somente para pedidos acima de R$100,00.");
        return;
    }
    alert("Pedido finalizado! Total: R$" + total.toFixed(2));
    cart = [];
    updateCart();
    toggleCart();
}
</script>

</body>
</html>
